<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Pay - PhonePe</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style5.css">
</head>
<body>

    <div class="app-container">
        
        <div class="background-content">
            <header class="header">
                <div class="header-left">
                    <i class="fa-solid fa-arrow-left" onclick="history.back()"></i>
                    <span class="header-title">Pay</span>
                </div>
                <div class="header-right">
                    <i class="fa-regular fa-circle-question"></i>
                </div>
            </header>

            <main class="main-content">
                <div class="payee-profile">
                    <div class="avatar-circle">AT</div>
                    <div class="payee-info">
                        <div class="payee-name">ANAMAR TECHNOLOGIES</div>
                        <div class="payee-upi">ANAMARTECHNOLOGIES.payu@mai...</div>
                    </div>
                </div>

                <div class="info-box amount-box">
                    <span class="rupee-symbol">₹</span>
                    <span class="amount-text" id="bg-display-amount">13.75</span>
                </div>

                <div class="info-box message-box">
                    <div class="msg-label">Message</div>
                    <div class="msg-value">UPIIntent</div>
                </div>

                <p class="disclaimer-text">
                    On tapping Pay, money will be deducted from the selected payment mode.
                </p>
            </main>
        </div>

        <div id="backdrop" class="overlay" onclick="closeSheet()"></div>

        <section id="bottomSheet" class="bottom-sheet">
            
            <div class="sheet-header">
                <span class="total-label">Total payable</span>
                <div class="total-right">
                    <span class="total-amount" id="sheet-amount">₹13.75</span>
                    <i class="fa-solid fa-xmark" id="cross_pay" onclick="closeSheet()" ></i>
                </div>
            </div>

            <div class="sheet-scrollable">
                <div class="section-container">
                    <div class="section-title">Recommended</div>

                    <div class="payment-method-row">
                        <div class="bank-logo-container">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/SBI-logo.svg/1024px-SBI-logo.svg.png" alt="SBI" class="sbi-img-logo">
                        </div>
                        
                        <div class="method-details">
                            <div class="bank-name">State Bank of India</div>
                            <div class="account-info">
                                <span class="dots">••</span> 3038 
                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/UPI-Logo-vector.svg/1280px-UPI-Logo-vector.svg.png" alt="UPI" class="upi-img">
                                <i class="fa-solid fa-caret-right upi-caret"></i>
                            </div>
                        </div>

                        <div class="method-right">
                            <span class="method-amount" id="bank-amount">₹13.75</span>
                            <i class="fa-solid fa-circle-check check-icon"></i>
                        </div>
                    </div>
                </div>

                <div class="section-container" style="margin-top: 10px;">
                    <div class="section-title">Add payment methods</div>

                    <div class="action-row">
                        <i class="fa-solid fa-building-columns bank-icon-outline"></i>
                        <span class="action-text">Add bank accounts</span>
                        <i class="fa-solid fa-chevron-right action-arrow"></i>
                    </div>
                </div>
            </div>

            <div class="pay-footer">
                <button class="purple-pay-btn" id="final-pay-btn" onclick="submitPay()">Pay ₹13.75</button>
            </div>
        </section>

    </div>

    <script>
        // Set dynamic pricing if coming from checkout
        window.onload = function() {
            let storedFare = localStorage.getItem('chartr_fare');
            // Check if there is a fare stored, otherwise default to 13.75
            if (storedFare && storedFare !== "0.0") {
                updateAllAmounts(storedFare);
            }
        };

        function updateAllAmounts(amount) {
            document.getElementById('bg-display-amount').innerText = amount;
            document.getElementById('sheet-amount').innerText = "₹" + amount;
            document.getElementById('bank-amount').innerText = "₹" + amount;
            document.getElementById('final-pay-btn').innerText = "Pay ₹" + amount;
        }

        // --- Handle Overlay Tap ---
        function closeSheet() {
            const overlay = document.getElementById('backdrop');
            const sheet = document.getElementById('bottomSheet');
            
            // This adds the 'hidden' class, dropping the overlay opacity to 0
            // and sliding the sheet out of view.
            overlay.classList.add('hidden');
            sheet.classList.add('hidden');
        }

        // --- Handle Final Pay Button ---
        function submitPay() {
            const payBtn = document.getElementById('final-pay-btn');
            const appContainer = document.querySelector('.app-container');
            
            // Show processing state
            payBtn.style.opacity = "0.7";
            payBtn.style.pointerEvents = "none";
            payBtn.innerText = "Processing...";
            
            // Slide screen away to final success page
            setTimeout(() => {
                appContainer.classList.add('slide-out-left');
                setTimeout(() => {
                    // Redirects to your final success page 
                    window.location.href = "index9.html"; 
                }, 250);
            }, 300);
        }
    </script>
</body>
</html>